<Window x:Class="LSS_prototype.Login_Page.ChangePasswordDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:local="clr-namespace:LSS_prototype.Login_Page"
        mc:Ignorable="d"
        Title="Change Password"
        Width="960" Height="720"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True">

    <Window.Resources>
        <SolidColorBrush x:Key="Bg"           Color="#F3F5F7"/>
        <SolidColorBrush x:Key="Primary"      Color="#173753"/>
        <SolidColorBrush x:Key="PrimaryHover" Color="#1F4767"/>
        <SolidColorBrush x:Key="PrimaryDown"  Color="#102A3F"/>
        <SolidColorBrush x:Key="InputBg"      Color="#FFFFFF"/>
        <SolidColorBrush x:Key="InputBorder"  Color="#D6DEE8"/>
        <SolidColorBrush x:Key="TextDark"     Color="#1E293B"/>
        <SolidColorBrush x:Key="TextMuted"    Color="#64748B"/>

        <Style x:Key="InputBoxBorderStyle" TargetType="Border">
            <Setter Property="Background"          Value="{StaticResource InputBg}"/>
            <Setter Property="BorderBrush"         Value="{StaticResource InputBorder}"/>
            <Setter Property="BorderThickness"     Value="2"/>
            <Setter Property="CornerRadius"        Value="12"/>
            <Setter Property="Height"              Value="64"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <Style x:Key="InputTextBoxStyle" TargetType="TextBox">
            <Setter Property="FontFamily"               Value="Arial"/>
            <Setter Property="FontSize"                 Value="24"/>
            <Setter Property="Background"               Value="Transparent"/>
            <Setter Property="BorderThickness"          Value="0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding"                  Value="18,0"/>
            <Setter Property="Foreground"               Value="{StaticResource TextDark}"/>
        </Style>

        <Style x:Key="InputPasswordBoxStyle" TargetType="PasswordBox">
            <Setter Property="FontFamily"               Value="Arial"/>
            <Setter Property="FontSize"                 Value="24"/>
            <Setter Property="Background"               Value="Transparent"/>
            <Setter Property="BorderThickness"          Value="0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding"                  Value="18,0"/>
            <Setter Property="Foreground"               Value="{StaticResource TextDark}"/>
        </Style>

        <!-- Primary Button (SAVE) -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background"      Value="{StaticResource Primary}"/>
            <Setter Property="Foreground"      Value="White"/>
            <Setter Property="FontFamily"      Value="Arial"/>
            <Setter Property="FontSize"        Value="24"/>
            <Setter Property="FontWeight"      Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height"          Value="64"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="12" Padding="18,10">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource PrimaryHover}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{StaticResource PrimaryDown}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Secondary Button (CANCEL) — hover/press 색 변화 없음 -->
        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background"      Value="White"/>
            <Setter Property="Foreground"      Value="{StaticResource Primary}"/>
            <Setter Property="FontFamily"      Value="Arial"/>
            <Setter Property="FontSize"        Value="24"/>
            <Setter Property="FontWeight"      Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Height"          Value="64"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{StaticResource InputBorder}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="12" Padding="18,10">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 필드 레이블 공통 스타일 -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Arial"/>
            <Setter Property="FontSize"   Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextMuted}"/>
            <Setter Property="Margin"     Value="2,0,0,10"/>
        </Style>

        <!-- 캡스락 경고 공통 스타일 -->
        <Style x:Key="CapsLockStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Arial"/>
            <Setter Property="FontSize"   Value="17"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#EF4444"/>
            <Setter Property="Margin"     Value="14,0,0,10"/>
            <Setter Property="Visibility" Value="Collapsed"/>
        </Style>
    </Window.Resources>

    <Border Background="{StaticResource Bg}"
            CornerRadius="16"
            SnapsToDevicePixels="True">

        <Grid HorizontalAlignment="Center"
              VerticalAlignment="Center"
              Width="720">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- 0 : 타이틀 -->
                <RowDefinition Height="26"/>
                <!-- 1 : 간격 -->
                <RowDefinition Height="Auto"/>
                <!-- 2 : LOGIN ID -->
                <RowDefinition Height="18"/>
                <!-- 3 : 간격 -->
                <RowDefinition Height="Auto"/>
                <!-- 4 : NEW PASSWORD 레이블 -->
                <RowDefinition Height="8"/>
                <!-- 5 : 간격 -->
                <RowDefinition Height="Auto"/>
                <!-- 6 : NEW PASSWORD 입력 -->
                <RowDefinition Height="18"/>
                <!-- 7 : 간격 -->
                <RowDefinition Height="Auto"/>
                <!-- 8 : CONFIRM PASSWORD 레이블 -->
                <RowDefinition Height="8"/>
                <!-- 9 : 간격 -->
                <RowDefinition Height="Auto"/>
                <!-- 10: CONFIRM PASSWORD 입력 -->
                <RowDefinition Height="22"/>
                <!-- 11: 간격 -->
                <RowDefinition Height="Auto"/>
                <!-- 12: 버튼 -->
            </Grid.RowDefinitions>

            <!-- ── 타이틀 ── -->
            <StackPanel Grid.Row="0" HorizontalAlignment="Center">
                <TextBlock Text="CHANGE PASSWORD"
                           FontFamily="Arial" FontSize="56" FontWeight="Bold"
                           Foreground="{StaticResource Primary}"
                           HorizontalAlignment="Center"/>
                <Border Height="4" Width="200"
                        Background="{StaticResource Primary}"
                        CornerRadius="2"
                        HorizontalAlignment="Center"
                        Margin="0,18,0,0"/>
                <TextBlock Text="First login requires a password update."
                           FontFamily="Arial" FontSize="18"
                           Foreground="#94A3B8"
                           HorizontalAlignment="Center"
                           Margin="0,14,0,0"/>
            </StackPanel>

            <!-- ── LOGIN ID ── -->
            <StackPanel Grid.Row="2">
                <TextBlock Text="LOGIN ID" Style="{StaticResource LabelStyle}"/>
                <Border Style="{StaticResource InputBoxBorderStyle}">
                    <TextBox x:Name="LoginIdBox" Text="{Binding LoginId, Mode=OneWay}"
                             Style="{StaticResource InputTextBoxStyle}"
                             IsReadOnly="True"
                             IsReadOnlyCaretVisible="False"
                             Opacity="0.85"/>
                </Border>
            </StackPanel>

            <!-- ── NEW PASSWORD 레이블 + CapsLock 경고 ── -->
            <Grid Grid.Row="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="NEW PASSWORD"
                           Style="{StaticResource LabelStyle}"
                           VerticalAlignment="Center"/>
                <TextBlock x:Name="CapsLockWarningNew"
                           Grid.Column="1"
                           Text="Caps Lock is ON. Password is case-sensitive."
                           Style="{StaticResource CapsLockStyle}"
                           VerticalAlignment="Center"/>
            </Grid>

            <!-- ── NEW PASSWORD 입력 ── -->
            <Border Grid.Row="6" Style="{StaticResource InputBoxBorderStyle}">
                <PasswordBox x:Name="NewPasswordBox"
                             Style="{StaticResource InputPasswordBoxStyle}"
                             GotKeyboardFocus="NewPasswordBox_CheckCaps"
                             PreviewKeyUp="NewPasswordBox_CheckCaps"
                             LostKeyboardFocus="NewPasswordBox_HideCaps"
                             />
            </Border>

            <!-- ── CONFIRM PASSWORD 레이블 + CapsLock 경고 ── -->
            <Grid Grid.Row="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="CONFIRM PASSWORD"
                           Style="{StaticResource LabelStyle}"
                           VerticalAlignment="Center"/>
                <TextBlock x:Name="CapsLockWarningConfirm"
                           Grid.Column="1"
                           Text="Caps Lock is ON. Password is case-sensitive."
                           Style="{StaticResource CapsLockStyle}"
                           VerticalAlignment="Center"/>
            </Grid>

            <!-- ── CONFIRM PASSWORD 입력 ── -->
            <Border Grid.Row="10" Style="{StaticResource InputBoxBorderStyle}">
                <PasswordBox x:Name="ConfirmPasswordBox"
                             Style="{StaticResource InputPasswordBoxStyle}"
                             GotKeyboardFocus="ConfirmPasswordBox_CheckCaps"
                              PreviewKeyUp="ConfirmPasswordBox_CheckCaps"
                             LostKeyboardFocus="ConfirmPasswordBox_HideCaps"/>
            </Border>

            <!-- ── 버튼 ── -->
            <Grid Grid.Row="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Button Grid.Column="0"
                        Content="SAVE"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="Save_Click"/>
                <Button Grid.Column="2"
                        Content="CANCEL"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="Cancel_Click"/>
            </Grid>

        </Grid>
    </Border>
</Window>

<Window x:Class="LSS_prototype.Login_Page.Login"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LSS_prototype.Login_Page"
        mc:Ignorable="d"
        Title="Login"
        Width="960"
        Height="720"
        ResizeMode="NoResize"
        Topmost="True"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.DataContext>
        <local:LoginViewModel />
    </Window.DataContext>

    <Window.Resources>
        <!-- ADMIN 체크박스 관련  -->
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
        
        <!-- 고정 조건 -->
        <SolidColorBrush x:Key="Bg" Color="#F3F5F7"/>
        <SolidColorBrush x:Key="Primary" Color="#173753"/>
        <SolidColorBrush x:Key="PrimaryHover" Color="#1F4767"/>
        <SolidColorBrush x:Key="PrimaryDown" Color="#102A3F"/>

        <!-- 설정 버튼 -->
        <SolidColorBrush x:Key="Secondary" Color="#5F6E82"/>
        <SolidColorBrush x:Key="SecondaryHover" Color="#516175"/>
        <SolidColorBrush x:Key="SecondaryDown" Color="#465669"/>

        <SolidColorBrush x:Key="TextDark" Color="#1E293B"/>
        <SolidColorBrush x:Key="TextMuted" Color="#64748B"/>

        <SolidColorBrush x:Key="InputBg" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="InputBorder" Color="#D6DEE8"/>

        <!-- 공통 입력 박스 Border 스타일 -->
        <Style x:Key="InputBoxBorderStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource InputBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource InputBorder}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Height" Value="64"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <!-- Primary Button (로그인) -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource Primary}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontFamily" Value="Arial"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="64"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="12"
                                Padding="18,10">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource PrimaryHover}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{StaticResource PrimaryDown}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Secondary Button (설정) -->
        <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource Secondary}"/>
            <Setter Property="FontSize" Value="20"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource SecondaryHover}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{StaticResource SecondaryDown}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- 체크박스 스타일 -->
        <Style x:Key="SimpleCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="MinHeight" Value="64"/>
            <Setter Property="MinWidth" Value="220"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontFamily" Value="Arial"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextDark}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Border x:Name="Root"
                                CornerRadius="14"
                                Background="Transparent"
                                BorderBrush="{StaticResource InputBorder}"
                                BorderThickness="0"
                                Padding="{TemplateBinding Padding}"
                                SnapsToDevicePixels="True">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="44"/>
                                    <ColumnDefinition Width="12"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border x:Name="Box"
                                        Width="40" Height="40"
                                        CornerRadius="10"
                                        Background="White"
                                        BorderBrush="{StaticResource InputBorder}"
                                        BorderThickness="2"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Left"
                                        SnapsToDevicePixels="True">
                                    <Viewbox x:Name="CheckHost"
                                             Visibility="Collapsed"
                                             Stretch="Uniform"
                                             Margin="6">
                                        <Path Data="M 0 6 L 4 10 L 12 2"
                                              Stroke="White"
                                              StrokeThickness="2.5"
                                              StrokeStartLineCap="Round"
                                              StrokeEndLineCap="Round"/>
                                    </Viewbox>
                                </Border>
                                <ContentPresenter Grid.Column="2" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Box" Property="Background" Value="{StaticResource Primary}"/>
                                <Setter TargetName="Box" Property="BorderBrush" Value="{StaticResource Primary}"/>
                                <Setter TargetName="CheckHost" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="Root" Property="Background" Value="#0F173753"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Root" Property="Background" Value="#0A173753"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Root" Property="Background" Value="#14173753"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Border Background="{StaticResource Bg}"
            CornerRadius="16"
            SnapsToDevicePixels="True">

        <Grid>

            <!-- ════ 좌측 하단: 회사 정보 ════ -->
            <StackPanel HorizontalAlignment="Left"
            VerticalAlignment="Bottom"
            Margin="24,0,0,20">

                <StackPanel.Resources>
                    <Style TargetType="TextBlock">
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="FontFamily" Value="Arial"/>
                        <Setter Property="Foreground" Value="#94A3B8"/>
                    </Style>
                </StackPanel.Resources>

                <!-- 1줄 : 회사명 + 전화번호 + 이메일 -->
                <TextBlock Margin="0,0,0,4">
        <Run FontWeight="Bold">회사명</Run>
        <Run> : 에스원바이오</Run>
        <Run Text="   ·   "/>

        <Run FontWeight="Bold">전화번호</Run>
        <Run> : 051-254-1379</Run>
        <Run Text="   ·   "/>

        <Run FontWeight="Bold">EMAIL</Run>
        <Run> : medical@s-one.co.kr</Run>
                </TextBlock>

                <!-- 2줄 : 회사주소 -->
                <TextBlock Margin="0,0,0,4">
        <Run FontWeight="Bold">회사주소</Run>
        <Run> : 부산 부산진구 서면로 25 서면삼한골든뷰빌딩 7층 705호 에스원바이오</Run>
                </TextBlock>

                <!-- 3줄 : 버전 -->
                <TextBlock>
        <Run FontWeight="Bold">버전</Run>
        <Run> : 1.0.0.1</Run>
                </TextBlock>

            </StackPanel>
            <!-- ════ 우측 하단: EXIT 버튼 ════ -->
            <Button Content="EXIT"
                    Width="90" Height="36"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Margin="0,0,20,20"
                    Background="Transparent"
                    Foreground="#94A3B8"
                    FontSize="30" FontWeight="Bold"
                    BorderThickness="0"
                    FontFamily="Arial"
                    Cursor="Hand"
                    Click="Button_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="#EF4444"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <!-- ════ 가운데 콘텐츠 영역 ════ -->
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  Width="720">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="26"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="18"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="22"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="16"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 타이틀 -->
                <StackPanel Grid.Row="0" HorizontalAlignment="Center">
                    <TextBlock Text="LOGIN"
                               FontSize="72" FontWeight="Bold" FontFamily="Arial"
                               Foreground="{StaticResource Primary}"
                               HorizontalAlignment="Center"/>
                    <Border Height="4" Width="140"
                            Background="{StaticResource Primary}"
                            CornerRadius="2"
                            HorizontalAlignment="Center"
                            Margin="0,18,0,0"/>
                    <TextBlock Text="(주)에스원바이오 LSS"
                               FontSize="18" FontFamily="Arial"
                               Foreground="#94A3B8"
                               HorizontalAlignment="Center"
                               Margin="0,14,0,0"/>
                </StackPanel>

                <!-- ID -->
                <StackPanel Grid.Row="2">
                    <TextBlock Text="ID"
                               FontSize="18" FontFamily="Arial"
                               Foreground="{StaticResource TextMuted}"
                               FontWeight="SemiBold"
                               Margin="2,0,0,10"/>
                    <Border Style="{StaticResource InputBoxBorderStyle}">
                        <TextBox Text="{Binding UserId, UpdateSourceTrigger=PropertyChanged}"
                                 FontSize="24" FontFamily="Arial"
                                 Background="Transparent" BorderThickness="0"
                                 VerticalContentAlignment="Center"
                                 Padding="18,0"
                                 Foreground="{StaticResource TextDark}"/>
                    </Border>
                </StackPanel>

                <!-- PASSWORD -->
                <StackPanel Grid.Row="4">
                    <TextBlock Text="PASSWORD"
                               FontSize="18" FontFamily="Arial"
                               Foreground="{StaticResource TextMuted}"
                               FontWeight="SemiBold"
                               Margin="2,0,0,10"/>
                    <Border Style="{StaticResource InputBoxBorderStyle}">
                        <PasswordBox x:Name="txtPassword"
                                FontSize="24"
                                FontFamily="Arial"
                                Background="Transparent"
                                BorderThickness="0"
                                VerticalContentAlignment="Center"
                                Padding="18,0"
                                Foreground="{StaticResource TextDark}"
                                GotKeyboardFocus="PasswordBox_GotFocus"
                                LostKeyboardFocus="PasswordBox_HideCaps"
                                PreviewKeyUp="PasswordBox_CheckCaps"/>
                    </Border>
                                       </StackPanel>

                <!-- 체크박스 -->
                <!-- Row 6: CapsLock 경고(좌) + Admin Mode(우) -->
                <Grid Grid.Row="6">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- ✅ CapsLock 경고 (왼쪽) -->
                    <TextBlock x:Name="CapsLockWarning"
                         Grid.Column="0"
                         Text="Caps Lock is ON. Password is case-sensitive."
                         FontSize="17"
                         FontFamily="Arial"
                         FontWeight="SemiBold"
                         Foreground="#EF4444"
                         VerticalAlignment="Center"
                         Margin="6,0,0,0"
                         Visibility="Collapsed"/>

                    <!-- Admin Mode (오른쪽) -->
                    <CheckBox Content="ADMIN MODE"
                            IsChecked="{Binding IsAdminMode}"
                            Visibility="{Binding ShowAdminMode, Converter={StaticResource BoolToVis}}"
                            HorizontalAlignment="Right"
                            Style="{StaticResource SimpleCheckBoxStyle}"/>
                </Grid>

                <!-- 로그인 버튼 -->
                <Grid Grid.Row="8">
                    <Button Style="{StaticResource PrimaryButtonStyle}"
                            Command="{Binding LoginCommand}"
                            CommandParameter="{Binding ElementName=txtPassword}">
                        <TextBlock Text="LOGIN"/>
                    </Button>
                </Grid>

            </Grid>
        </Grid>

    </Border>
</Window>

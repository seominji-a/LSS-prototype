<Window x:Class="LSS_prototype.User_Page.setting"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LSS_prototype.User_Page"
        mc:Ignorable="d"
        Title="SETTING" Height="748" Width="946"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        FontFamily="Arial">

    <Window.Resources>
        <SolidColorBrush x:Key="Primary"  Color="#173753"/>
        <SolidColorBrush x:Key="Panel"    Color="#1C2B3A"/>
        <SolidColorBrush x:Key="Card"     Color="#243447"/>
        <SolidColorBrush x:Key="CardDeep" Color="#1A2D3E"/>
        <SolidColorBrush x:Key="BtnDark"  Color="#2A3F55"/>
        <SolidColorBrush x:Key="Accent"   Color="#3B82F6"/>
        <SolidColorBrush x:Key="Muted"    Color="#64748B"/>
        <SolidColorBrush x:Key="Inactive" Color="#94A3B8"/>
        <SolidColorBrush x:Key="Divider"  Color="#2A3F55"/>

        <Style x:Key="InputBox" TargetType="TextBox">
            <Setter Property="Background"               Value="{StaticResource CardDeep}"/>
            <Setter Property="Foreground"               Value="White"/>
            <Setter Property="CaretBrush"               Value="White"/>
            <Setter Property="BorderBrush"              Value="{StaticResource BtnDark}"/>
            <Setter Property="BorderThickness"          Value="1.5"/>
            <Setter Property="FontSize"                 Value="15"/>
            <Setter Property="Height"                   Value="42"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10" Padding="12,0">
                            <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="IpInputBox" TargetType="TextBox" BasedOn="{StaticResource InputBox}">
            <Setter Property="FontFamily"                 Value="Consolas"/>
            <Setter Property="FontSize"                   Value="16"/>
            <Setter Property="MaxLength"                  Value="23"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
        </Style>

        <Style x:Key="PortInputBox" TargetType="TextBox" BasedOn="{StaticResource InputBox}">
            <Setter Property="FontSize"  Value="15"/>
            <Setter Property="MaxLength" Value="5"/>
        </Style>

        <Style x:Key="MultiInputBox" TargetType="TextBox" BasedOn="{StaticResource InputBox}">
            <Setter Property="Height"                   Value="42"/>
            <Setter Property="AcceptsReturn"            Value="False"/>
            <Setter Property="TextWrapping"             Value="NoWrap"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10" Padding="12,0">
                            <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="FieldLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource Inactive}"/>
            <Setter Property="FontSize"   Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin"     Value="2,0,0,5"/>
        </Style>

        <Style x:Key="BaseBtn" TargetType="Button">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="12">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AccentBtn" TargetType="Button" BasedOn="{StaticResource BaseBtn}">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize"   Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height"     Value="40"/>
        </Style>

        <Style x:Key="ApplyBtn" TargetType="Button" BasedOn="{StaticResource BaseBtn}">
            <Setter Property="Background" Value="{StaticResource Primary}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize"   Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height"     Value="40"/>
        </Style>

        <Style x:Key="CancelBtn" TargetType="Button" BasedOn="{StaticResource BaseBtn}">
            <Setter Property="Background" Value="{StaticResource BtnDark}"/>
            <Setter Property="Foreground" Value="{StaticResource Inactive}"/>
            <Setter Property="FontSize"   Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height"     Value="40"/>
        </Style>

        <Style x:Key="SaveBtn" TargetType="Button" BasedOn="{StaticResource BaseBtn}">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize"   Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height"     Value="42"/>
            <Setter Property="Width"      Value="72"/>
        </Style>

        <Style x:Key="ExitBtn" TargetType="Button" BasedOn="{StaticResource BaseBtn}">
            <Setter Property="Background" Value="#111827"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize"   Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Width"      Value="100"/>
            <Setter Property="Height"     Value="42"/>
        </Style>
    </Window.Resources>

    <Border Background="{StaticResource Panel}" CornerRadius="18">
        <Border.Effect>
            <DropShadowEffect BlurRadius="32" ShadowDepth="6" Opacity="0.55" Color="Black"/>
        </Border.Effect>

        <Grid Margin="32,24,32,24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="12"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="12"/>
                <RowDefinition Height="1"/>
                <RowDefinition Height="14"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="12"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ── 타이틀 ── -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <TextBlock Text="Setting" Foreground="White" FontSize="36" FontWeight="Bold"/>
                    <TextBlock Text="DICOM 네트워크 설정" Foreground="{StaticResource Muted}" FontSize="12" Margin="2,2,0,0"/>
                </StackPanel>
                <Button Grid.Column="1" Width="36" Height="36"
                        Style="{StaticResource BaseBtn}"
                        Background="{StaticResource BtnDark}"
                        VerticalAlignment="Top"
                        Click="Exit_Click">
                    <TextBlock Text="✕" Foreground="White" FontSize="16" FontWeight="Bold"/>
                </Button>
            </Grid>

            <!-- ── Hospital Name ── -->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="240"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Hospital Name"
                           Foreground="{StaticResource Inactive}"
                           FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center"/>
                <TextBox Grid.Column="2" Style="{StaticResource InputBox}"
                         Text="{Binding HospitalName, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Grid.Column="4" Content="Save"
                        Style="{StaticResource SaveBtn}"
                        Command="{Binding SaveHospitalCommand}"/>
            </Grid>

            <!-- ── 구분선 ── -->
            <Border Grid.Row="4" Background="{StaticResource Divider}"/>

            <!-- ── C-STORE / MWL ── -->
            <Grid Grid.Row="6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="1"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ════ C-STORE ════ -->
                <Grid Grid.Column="0" Margin="0,0,18,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Border Width="4" Height="22" Background="{StaticResource Accent}" CornerRadius="2" Margin="0,0,8,0"/>
                        <TextBlock Text="C-STORE" Foreground="White" FontSize="18" FontWeight="Bold"/>
                    </StackPanel>
                    <Border Grid.Row="2" Background="{StaticResource Card}" CornerRadius="14" Padding="18,14">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="AET" Style="{StaticResource FieldLabel}"/>
                            <TextBox   Grid.Row="1" Style="{StaticResource InputBox}"
                                       Text="{Binding CStoreAET, UpdateSourceTrigger=PropertyChanged}"/>

                            <Grid Grid.Row="3" Margin="0,0,0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="IP"   Style="{StaticResource FieldLabel}" Margin="2,0,0,0"/>
                                <TextBlock Grid.Column="2" Text="PORT" Style="{StaticResource FieldLabel}" Margin="2,0,0,0"/>
                            </Grid>

                            <Grid Grid.Row="4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0"
                                         x:Name="CStoreIPTextBox"
                                         Style="{StaticResource IpInputBox}"
                                         Text="     .     .     .     "
                                         GotFocus="IPTextBox_GotFocus"
                                         PreviewTextInput="IPTextBox_PreviewTextInput"
                                         PreviewKeyDown="IPTextBox_PreviewKeyDown"
                                         SelectionChanged="IPTextBox_SelectionChanged"/>
                                <TextBox Grid.Column="2"
                                         Style="{StaticResource PortInputBox}"
                                         Text="{Binding CStorePort, UpdateSourceTrigger=PropertyChanged}"/>
                            </Grid>

                            <TextBlock Grid.Row="6" Text="MyAET" Style="{StaticResource FieldLabel}"/>
                            <TextBox   Grid.Row="7" Style="{StaticResource MultiInputBox}"
                                       Text="{Binding CStoreMyAET, UpdateSourceTrigger=PropertyChanged}"
                                       Tag="RMICG"/>

                            <Grid Grid.Row="9">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="0" Content="Test Connection" Style="{StaticResource AccentBtn}" Command="{Binding CStoreTestCommand}"/>
                                <Button Grid.Column="2" Content="Apply"           Style="{StaticResource ApplyBtn}"  Command="{Binding CStoreApplyCommand}"/>
                            </Grid>
                            <Button Grid.Row="11" Content="Cancel" Style="{StaticResource CancelBtn}" Command="{Binding CStoreCancelCommand}"/>
                        </Grid>
                    </Border>
                </Grid>

                <!-- 세로 구분선 -->
                <Border Grid.Column="1" Background="{StaticResource Divider}"/>

                <!-- ════ MWL ════ -->
                <Grid Grid.Column="2" Margin="18,0,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Border Width="4" Height="22" Background="{StaticResource Accent}" CornerRadius="2" Margin="0,0,8,0"/>
                        <TextBlock Text="MWL" Foreground="White" FontSize="18" FontWeight="Bold"/>
                    </StackPanel>
                    <Border Grid.Row="2" Background="{StaticResource Card}" CornerRadius="14" Padding="18,14">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="AET" Style="{StaticResource FieldLabel}"/>
                            <TextBox   Grid.Row="1" Style="{StaticResource InputBox}"
                                       Text="{Binding MwlAET, UpdateSourceTrigger=PropertyChanged}"/>

                            <Grid Grid.Row="3" Margin="0,0,0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="IP"   Style="{StaticResource FieldLabel}" Margin="2,0,0,0"/>
                                <TextBlock Grid.Column="2" Text="PORT" Style="{StaticResource FieldLabel}" Margin="2,0,0,0"/>
                            </Grid>

                            <Grid Grid.Row="4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0"
                                         x:Name="MwlIPTextBox"
                                         Style="{StaticResource IpInputBox}"
                                         Text="     .     .     .     "
                                         GotFocus="IPTextBox_GotFocus"
                                         PreviewTextInput="IPTextBox_PreviewTextInput"
                                         PreviewKeyDown="IPTextBox_PreviewKeyDown"
                                         SelectionChanged="IPTextBox_SelectionChanged"/>
                                <TextBox Grid.Column="2"
                                         Style="{StaticResource PortInputBox}"
                                         Text="{Binding MwlPort, UpdateSourceTrigger=PropertyChanged}"/>
                            </Grid>

                            <TextBlock Grid.Row="6" Text="MyAET" Style="{StaticResource FieldLabel}"/>
                            <TextBox   Grid.Row="7" Style="{StaticResource MultiInputBox}"
                                       Text="{Binding MwlMyAET, UpdateSourceTrigger=PropertyChanged}"
                                       Tag="RMICG"/>

                            <Grid Grid.Row="9">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="0" Content="Test Connection" Style="{StaticResource AccentBtn}" Command="{Binding MwlTestCommand}"/>
                                <Button Grid.Column="2" Content="Apply"           Style="{StaticResource ApplyBtn}"  Command="{Binding MwlApplyCommand}"/>
                            </Grid>
                            <Button Grid.Row="11" Content="Cancel" Style="{StaticResource CancelBtn}" Command="{Binding MwlCancelCommand}"/>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>

        </Grid>
    </Border>
</Window>
